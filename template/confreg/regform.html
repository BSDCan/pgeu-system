{%extends conftemplbase %}
{%load markup%}
{%block title%}Conference Registration - {{conference}}{%endblock%}
{%block extrahead%}
<script language="javascript">
function confirmInvoice() {
   return confirm('Once you proceed to payment, an invoice will be generated for your registration, and you will no longer be able to change it.\n\nThis invoice will be addressed to the person, company and address specified in the registration - please take a moment to review those fields if you need to.\n\nThe invoice will be delivered as a PDF in your browser, no paper invoice will be sent.\n\nAre you sure you want to proceed to payment?');
}
</script>
{%endblock%}
{%block content%}
<h1>Conference Registration - {{conference}}</h1>

<p>On this page you can register for <a href="{{conference.confurl}}">{{conference}}</a>.
</p>
<p>
<b>Note!</b> if you wish to register multiple people,
you must <a href="/logout">log out</a> and back in (with a different account)
between each registration to avoid conflicts.
</p>

<form action="." method="post" class="pgeuregform">
{% if form_is_saved %}
<p><b>Note!</b> Your registration is not confirmed until the payment
has been confirmed.</p>
{% endif %}

{% if form.errors %}
<p style="color:red; font-weight: bold">Note! This form contains errors and has not been saved!</p>
{% endif %}

{%if form.non_field_errors%}{{form.non_field_errors}}{%endif%}

 <fieldset id="personal_information">
  <legend>Personal information</legend>
      <div>
	You are currently making a registration for community account:<br/>
	<i>{{user.username}} ({{user.first_name}} {{user.last_name}} &lt;{{user.email}}&gt;).</i><br/>
	<br/>
      </div>
      <div{% if form.regtype.errors %} class="errfld"{% endif %}>
       {{ form.regtype.label_tag }} <br/>
        {{ form.regtype }} {% if form.regtype.errors %}{{ form.regtype.errors}}{% endif %}
      </div>

      <div{% if form.firstname.errors %} class="errfld"{% endif %}>
       {{ form.firstname.label_tag }} <br/>
        {{ form.firstname }} {% if form.firstname.errors %}{{ form.firstname.errors}}{% endif %}
      </div>

      <div{% if form.lastname.errors %} class="errfld"{% endif %}>
       {{ form.lastname.label_tag }} <br/>
        {{ form.lastname }} {% if form.lastname.errors %}{{ form.lastname.errors}}{% endif %}
      </div>

      <div{% if form.company.errors %} class="errfld"{% endif %}>
       {{ form.company.label_tag }} <br/>
        {{ form.company }} {% if form.company.errors %}{{ form.company.errors}}{% endif %}
      </div>

      <div{% if form.address.errors %} class="errfld"{% endif %}>
       {{ form.address.label_tag }} (also used for invoices)<br/>
        {{ form.address }} {% if form.address.errors %}{{ form.address.errors}}{% endif %}
      </div>

      <div{% if form.country.errors %} class="errfld"{% endif %}>
       {{ form.country.label_tag }} <br/>
        {{ form.country }} {% if form.country.errors %}{{ form.country.errors}}{% endif %}
      </div>

      <div{% if form.email.errors %} class="errfld"{% endif %}>
       {{ form.email.label_tag }} <br/>
        {{ form.email }} {% if form.email.errors %}{{ form.email.errors}}{% endif %}
      </div>

      <div{% if form.phone.errors %} class="errfld"{% endif %}>
       {{ form.phone.label_tag }} <br/>
        {{ form.phone }} {% if form.phone.errors %}{{ form.phone.errors}}{% endif %}
      </div>

      <div{% if form.twittername.errors %} class="errfld"{% endif %}>
       {{ form.twittername.label_tag }} <br/>
        {{ form.twittername }} {% if form.twittername.errors %}{{ form.twittername.errors}}{% endif %}
      </div>

      <div{% if form.nick.errors %} class="errfld"{% endif %}>
       {{ form.nick.label_tag }} <br/>
        {{ form.nick }} {% if form.nick.errors %}{{ form.nick.errors}}{% endif %}
      </div>
 </fieldset>

 {%if conference.asktshirt or conference.askfood or conference.askshareemail %}
 <fieldset id="conference_info">
  <legend>Conference information</legend>
      {%if conference.asktshirt %}
      <div{% if form.shirtsize.errors %} class="errfld"{% endif %}>
       {{ form.shirtsize.label_tag }} <br/>
        {{ form.shirtsize }} {% if form.shirtsize.errors %}{{ form.shirtsize.errors}}{% endif %}
      </div>
      {%endif%}
      {%if conference.askfood %}
      <div{% if form.dietary.errors %} class="errfld"{% endif %}>
       {{ form.dietary.label_tag }} <br/>
        {{ form.dietary }} {% if form.dietary.errors %}{{ form.dietary.errors}}{% endif %}
      </div>
      {%endif%}
      {%if conference.askshareemail %}
      <div{% if form.shareemail.errors %} class="errfld"{% endif %}>
        {{ form.shareemail }} {{ form.shareemail.label_tag }}
	{% if form.shareemail.errors %}{{ form.shareemail.errors}}{% endif %}
      </div>
      {%endif%}
 </fieldset>
 {%endif%}{%comment%}askshirt, askfood,etc{%endcomment%}

 {% if additionaloptions %}
 <fieldset id="additional_options">
  <legend>Additional options</legend>
  {%if conference.additionalintro %}
  <div>{{conference.additionalintro|markdown}}</div>
  {%endif%}
  <div{%if form.additionaloptions.errors%} class="errfld"{%endif%}>
   {{ form.additionaloptions }} {% if form.additionaloptions.errors %}{{ form.additionaloptions.errors}}{%endif%}
  </div>
 </fieldset>
 {%endif%}{%comment%}additionaloptions{%endcomment%}

 <fieldset id="voucher_codes">
   <legend>Voucher codes</legend>
   <div>If you have a voucher code, enter it in this field. If you do not
     have one, just leave the field empty.</div>
   <div{% if form.vouchercode.errors %} class="errfld"{% endif %}>
     {{ form.vouchercode.label_tag }} <br/>
     {{ form.vouchercode }} {% if form.vouchercode.errors %}{{ form.vouchercode.errors}}{% endif %}
   </div>
 </fieldset>

 <p>
   You can edit your registration details and save as many times as you want
   in the process. Once you are finished, click <i>Save and finish registration</i>
   to proceed to the payment options.
 </p>
 <input type="submit" name="submit" value="Save and continue editing"><br/>
 <input type="submit" name="submit" onclick="return confirmInvoice()" value="Save and finish registration"><br/>
</form>
{%endblock%}

